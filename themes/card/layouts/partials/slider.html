{{ $slider := sort (.Site.Params.slider.images) "weight" }}
{{ $len := (len $slider) }}

<div class="split-image">
  <div class="s-wrap" id="image-slider" role="slider" aria-label="Slider image" aria-valuenow="{{ $len }}" aria-valuemin="1" aria-valuemax="{{ $len }}">
    {{ range $index, $value := $slider }}
      {{ $index :=add $index 1 }}

      {{ if not (eq $len 1) }}
        <input type="radio" id="s-{{ $index }}" name="slider-control" {{ if eq $index 1 }}checked="checked"{{ end }} />
      {{ end }}
    {{ end }}
    <ul class="s-content">
      {{ range $index, $value := $slider }}
        {{ $imagePath := print "images/" .name }}
        {{ $index :=add $index 1 }}

        {{ with resources.Get $imagePath }}
          <li class="s-item s-item-{{ $index }}">

            {{ $largeImg := .Resize "900x webp" }}
            {{ $mediumImg := .Resize "700x webp" }}
            {{ $smallImg := .Resize "500x webp" }}
            
            <img src="{{ $smallImg.RelPermalink }}" 
              srcset="{{ $smallImg.RelPermalink }} 500w, {{ $mediumImg.RelPermalink }} 700w, {{ $largeImg.RelPermalink }} 900w" 
              sizes="(max-width:800px) 50vw, (min-width: 801px) 50vw, 50vw" 
              alt="Slider Images" 
              {{ if not (eq $index 1) }}loading="lazy"{{ end }} 
              type="image/webp" 
              {{if $value.position}} style="object-position: {{ $value.position }};"{{ end }}
            />
          </li>
        {{ end }}
      {{ end }}
    </ul>

    {{ if not (eq $len 1) }}
      <div class="s-control">
        {{ range $index, $value := $slider }}
          {{ $index :=add $index 1 }}
          <label class="s-c-{{ $index }}" for="s-{{ $index }}"></label>
        {{ end }}
      </div>

      <div class="s-nav">
        {{ range $index, $value := $slider }}
          {{ $index :=add $index 1 }}
          {{ if eq $index 1 }}
            <label class="s-nav-{{ $index }} right" for="s-{{ add $index 1 }}">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.1717 12.0007L8.22192 7.05093L9.63614 5.63672L16.0001 12.0007L9.63614 18.3646L8.22192 16.9504L13.1717 12.0007Z" fill="currentColor"></path></svg>
            </label>
          {{ else if (eq $index $len) }}
            <label class="s-nav-{{ $index }} left" for="s-{{ add $index -1 }}">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z" fill="currentColor"></path></svg>
            </label>
          {{ else }}
            <label class="s-nav-{{ $index }} left" for="s-{{ add $index -1 }}">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z" fill="currentColor"></path></svg>
            </label>
            <label class="s-nav-{{ $index }} right" for="s-{{ add $index 1 }}">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.1717 12.0007L8.22192 7.05093L9.63614 5.63672L16.0001 12.0007L9.63614 18.3646L8.22192 16.9504L13.1717 12.0007Z" fill="currentColor"></path></svg>
            </label>
          {{ end }}
        {{ end }}
      </div>
    {{ end }}


  {{ range $index, $value := $slider }}
    {{ if isset . "credit" }}
      <span class="s-credit-{{ add $index 1 }}">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z" fill="currentColor"></path></svg>
        <span class="s-text-credit">{{ .credit | safeHTML }}</span>
      </span>
    {{ end }}
  {{ end }}

  </div>

</div>
