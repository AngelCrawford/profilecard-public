<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<!-- SEO -->
<title>{{ if .IsPage }}{{ .Title }} - {{ end }}{{ .Site.Title }}</title>
{{ with .Site.Params.author }}<meta name="author" content="{{ . }}" />{{ end }}
{{ with .Site.Params.description }}<meta name="description" content="{{ . }}" />{{ end }}
<meta name="robots" content="index, follow" />
<meta name="referrer" content="always" />

<!-- Social & Open Graph -->
<meta property="og:title" content="{{ if .IsPage }}{{ .Title }} - {{ end }}{{ .Site.Title }}" />
{{ with .Site.Params.description }}<meta property="og:description" content="{{ . }}" />{{ end }}
<meta property="og:url" content="{{ .Site.BaseURL }}" />
{{ with .Site.Params.shareImage }}
<meta property="og:image" content="{{ . | absURL }}" />
<meta name="twitter:card" content="summary_large_image" />
{{ end }}
{{ with .Site.Params.twitterHandle }}<meta name="twitter:site" content="@{{ . }}" />{{ end }}

<!-- Favicon -->
{{ with .Site.Params.favicon }}<link rel="icon" href="{{ . | absURL }}" />{{ end }}

<!-- Styles -->
{{ $sass := resources.Get "scss/main.scss" | resources.ExecuteAsTemplate "style.scss" . }}
{{ $style := $sass | resources.ToCSS | resources.Minify }}
<link rel="stylesheet" href="{{ $style.Permalink }}">
<meta name="viewport" content="width=device-width,initial-scale=1" />

<!-- Image Styles -->
{{ if .Site.Params.visual.image.enable }}
    <style>
      .s-content .s-item {
        background-size: {{ if .Site.Params.visual.image.size }}{{ .Site.Params.visual.image.size }}{{ else }}cover{{ end }};
        background-position: {{ if .Site.Params.visual.image.position }}{{ .Site.Params.visual.image.position }}{{ else }}center center{{ end }};
      }
      {{ range $index, $value := .Site.Params.visual.image.file }}
        .s-content .s-item.s-item-{{ add $index 1 }} { background-image: url("{{ .url }}"); }
        {{ if isset . "url_smallish" }}
          @media (max-width: {{ $.Site.Params.breakpoints.bp_smallish }} ) {
            .s-content .s-item.s-item-{{ add $index 1 }} { background-image: url("{{ .url_smallish }}"); }
          }
        {{ end }}
        {{ if isset . "url_tablet" }}
          @media (max-width: {{ $.Site.Params.breakpoints.bp_tablet }} ) {
            .s-content .s-item.s-item-{{ add $index 1 }} { background-image: url("{{ .url_tablet }}"); }
          }
        {{ end }}
        {{ if isset . "url_mobile" }}
          @media (max-width: {{ $.Site.Params.breakpoints.bp_mobile }} ) {
            .s-content .s-item.s-item-{{ add $index 1 }} { background-image: url("{{ .url_mobile }}"); }
          }
        {{ end }}
      {{ end }}
    </style>
{{ end }}

<!-- Google Analytics -->
{{ if and (.Site.GoogleAnalytics) (not (in (printf "%#v" .Site.BaseURL) "localhost")) }}
  {{ template "_internal/google_analytics.html" . }}
{{ end }}
