$(document).ready(function(){$('#mainContent').on('scroll',onScroll);$('body').on('touchmove',onScroll);function onScroll(){if($('#mainContent').scrollTop()>=300){$('#back-to-top-button').addClass('show');}else{$('#back-to-top-button').removeClass('show');}}
$("body").on("click",function(event){if(event.target.tagName!=="A")
return;if(history===null)
return;var newUrl=event.target.href;var domain=window.location.origin;if(typeof domain!=="string"||newUrl.search(domain)!==0){event.preventDefault();window.open(newUrl,"_blank");}else{event.preventDefault();loadPage(newUrl);history.pushState(null,"",newUrl);}});window.onpopstate=function(event){loadPage(window.location);}
if(getCookie("spotifyWidget")){removeOverlay();};});function loadPage(newUrl){var httpRequest=new XMLHttpRequest();httpRequest.onreadystatechange=function(){if(httpRequest.readyState!==XMLHttpRequest.DONE)
return;var newDocument=httpRequest.responseXML;if(newDocument===null)
return;var newContent=httpRequest.responseXML.getElementById("mainContent");if(newContent===null)
return;document.title=newDocument.title;var contentElement=document.getElementById("mainContent");contentElement.replaceWith(newContent);$("#remove-img").bind("click",function(){$("#spotifyModal").css("display","block");});$("#accept").bind("click",function(){$("#spotifyModal").css("display","none");removeOverlay();setCookie("spotifyWidget","true",13);});$("#abort").bind("click",function(){$("#spotifyModal").css("display","none");});$("body").bind("click",function(event){if(event.target==$("#spotifyModal").get(0)){$("#spotifyModal").css("display","none");}});if(getCookie("spotifyWidget")){removeOverlay();};createPie(".pieID.legend",".pieID.pie");$('#mainContent').scroll(function(){if($('#mainContent').scrollTop()>=10){$('#back-to-top-button').addClass('show');}else{$('#back-to-top-button').removeClass('show');}});}
httpRequest.responseType="document";httpRequest.open("GET",newUrl);httpRequest.send();};function setCookie(name,value,days){var expires="";if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toUTCString();}
document.cookie=name+"="+(value||"")+expires+"; path=/";};function getCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;};function eraseCookie(name){document.cookie=name+'=; Max-Age=-99999999;';};function sliceSize(dataNum,dataTotal){return(dataNum/dataTotal)*360;}
function addSlice(sliceSize,pieElement,offset,sliceID,color){$(pieElement).append("<div class='slice "+sliceID+"'><span></span></div>");var offset=offset-1;var sizeRotation=-179+sliceSize;$("."+sliceID).css({"transform":"rotate("+offset+"deg) translate3d(0,0,0)"});$("."+sliceID+" span").css({"transform":"rotate("+sizeRotation+"deg) translate3d(0,0,0)","background-color":color});}
function iterateSlices(sliceSize,pieElement,offset,dataCount,sliceCount,color){var sliceID="s"+dataCount+"-"+sliceCount;var maxSize=179;if(sliceSize<=maxSize){addSlice(sliceSize,pieElement,offset,sliceID,color);}else{addSlice(maxSize,pieElement,offset,sliceID,color);iterateSlices(sliceSize-maxSize,pieElement,offset+maxSize,dataCount,sliceCount+1,color);}}
function createPie(dataElement,pieElement){var listData=[];$(dataElement+" span").each(function(){listData.push(Number($(this).html()));});var listTotal=0;for(var i=0;i<listData.length;i++){listTotal+=listData[i];}
var offset=0;var color=["#3f3f3f","#717171","#b6b6b6","#ffffff","#137457","#0c4836","#17a2b8","#0f6674","#296ACC",];for(var i=0;i<listData.length;i++){var size=sliceSize(listData[i],listTotal);iterateSlices(size,pieElement,offset,i,0,color[i]);$(dataElement+" li:nth-child("+(i+1)+")").css("border-color",color[i]);offset+=size;}}